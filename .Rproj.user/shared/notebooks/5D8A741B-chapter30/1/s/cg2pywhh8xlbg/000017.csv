"0","# ハザードが変化するモデル（ワイブル分布）"
"0","sv_weibull <- "
"0","  data.frame("
"0","    sv = c("
"0","      rweibull(10000, shape=0.8, scale=100) |> round(),"
"0","      rweibull(10000, shape=1, scale=100) |> round(),"
"0","      rweibull(10000, shape=1.2, scale=100) |> round()"
"0","    ),"
"0","    type =rep("
"0","      c(""shape=0.8, scale=100"", ""shape=1.0, scale=100"", ""shape=1.2, scale=100""),"
"0","      c(10000, 10000, 10000)"
"0","    )"
"0","  )"
"0",""
"0","p <- survfit(Surv(sv, rep(1, 30000))~type, data=sv_weibull) |> ggsurvfit()+labs(title=""ハザードが変化する場合の生存曲線"")+theme(legend.text=element_text(size=6))"
"0",""
"0","hazard_f <- function(time, scale, shape){"
"0","  shape * scale * time ^ (shape - 1)"
"0","}"
"0",""
"0","p1 <- data.frame("
"0","  time=rep(1:300, 3), "
"0","  hazard=c("
"0","    hazard_f(1:300, 1/100, 0.8),"
"0","    hazard_f(1:300, 1/100, 1),"
"0","    hazard_f(1:300, 1/100, 1.2)),"
"0","  type=rep("
"0","      c(""shape=0.8, scale=100"", ""shape=1.0, scale=100"", ""shape=1.2, scale=100""),"
"0","      c(300, 300, 300)"
"0","    )"
"0",") |> "
"0","  ggplot(aes(x=time, y=hazard, color=type))+"
"0","  geom_line()+"
"0","  expand_limits(y=0)+"
"0","  theme(legend.position=""bottom"", legend.text=element_text(size=6))+labs(title=""ハザードの推移"")"
"0",""
"0","p | p1"
